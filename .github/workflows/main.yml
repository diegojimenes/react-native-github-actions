name: Build desenvolvimento

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: "gradlew"
      run: |
        which -a gradle
        gradle --version
    - uses: actions/setup-node@v1
      with:
        node-version: '10.15.3'
    - name: DependÃªncias do projeto
      run: yarn install
    - name: "tree"
      run: sudo apt-get install tree
    - name: "BUILD"
      run: cd android && chmod a+x gradlew &&./gradlew assembleRelease && cd ..
    - name: "get apk"
      run: cd android && tree app/build/outputs
    - name: "upload apk"
    - uses: actions/upload-artifact@v1
      with:
        name: apk-release
        path: android/app/build/outputs/apk/release/app-release.apk
